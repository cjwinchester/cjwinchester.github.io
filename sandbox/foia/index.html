<!doctype html>
<html>

<head>

<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <style>
    body { overflow-x:hidden; padding-top:50px;}
    th, .fa, h1 { cursor: pointer; cursor: hand; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: moz-none; -ms-user-select: none; user-select: none; }
    th:hover { background: #ecf4fb; }
    .c { text-align:center; }
	.hint { float:left; font-weight:bold; display:none; }
    </style>

    <title>Records requests</title>

    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    
    <script>
    /*
 jQuery Plugin: Table Filter - version 0.2.1

 LICENSE: http://hail2u.mit-license.org/2009
*/
(function(a){a.fn.addTableFilter=function(d){var b=a.extend({},a.fn.addTableFilter.defaults,d),c,e;this.is("table")&&(this.attr("id")||this.attr({id:"t-"+Math.floor(99999999*Math.random())}),c=this.attr("id"),d=c+"-filtering",e=a("<label/>").attr({"for":d}).append(b.labelText),b=a('<input type="text" class="form-control" id="search" placeholder="Filter ...">').attr({id:d,size:b.size}),a("<p/>").addClass("formTableFilter").append(e).append(b).insertBefore(this),a("#"+d).delayBind("keyup",function(){var b=a(this).val().toLowerCase().split(" ");a("#"+c+
" tbody tr").each(function(){var d=a(this).html().toLowerCase().replace(/<.+?>/g,"").replace(/\s+/g," "),c=0;a.each(b,function(){if(0>d.indexOf(this))return c=1,!1});c?a(this).hide():a(this).show()})},300));return this};a.fn.addTableFilter.defaults=a.fn.delayBind=function(d,b,c,e){a.isFunction(b)&&(e=c,c=b,b=void 0);var g=this,f=null;return this.bind(d,b,function(b){clearTimeout(f);f=setTimeout(function(){c.apply(g,[a.extend({},b)])},e)})}})(jQuery);
</script>
    
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
<![endif]-->
    
</head>

<body>

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  </div>
  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <ul class="nav navbar-nav">
      <li><a href="#" data-toggle="modal" id="newentry" data-target="#entry">Add new entry</a></li>
      <li><a href="#" data-toggle="modal" data-target="#foia">FOIA template</a></li>
      <li><a href="#" data-toggle="modal" data-target="#neb">Nebraska records request template</a></li>
      <li><a href='https://docs.google.com/spreadsheet/ccc?key=0Ag4MM37uq7FmdFFuMW15Rk1seGVFd3cyaUFtcjN0THc&usp=sharing' target="_blank">Edit spreadsheet</a></li>
    </ul>
  </div>
</nav>

 <div class="jumbotron" style="background:#2c7fb8; color:#fff">
             <h1 style="font-weight:bold; letter-spacing: -1px;"><i class="fa fa-file-text-o"></i> Records requests</h1>
        </div>


<div class="col-md-12" id="records"></div>

<!-- Form modal -->
<div class="modal fade" id="entry" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
    
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Add new entry</h4>
      </div>
      <div class="modal-body" id="formentry">
   
<script type="text/javascript">var submitted=false;</script>

    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;" onload="if(submitted) {location.reload()}"></iframe>

<form action="https://docs.google.com/forms/d/1uBTm61auGJl_Gqa5V1gwEUUWfhhS5W_Hqv6Agvv2eho/formResponse" method="POST" id="thinger" target="hidden_iframe" role="form" onsubmit="Javascript: $('#entry').modal('hide'); setTimeout(function() {$('#thinger').find('input:text, input:password, input:file, select, textarea').val(''); $('#thinger').find('input:radio, input:checkbox').removeAttr('checked').removeAttr('selected');}, 1500); setTimeout(function() {location.reload(true);}, 3000)">

    <input type="text" name="entry.596595219" value="" class="form-control" id="entry_596595219" placeholder="Which agency has the records?" dir="auto" aria-label="agency  " title=""><br/>
    
    <textarea name="entry.2002669445" rows="3" class="form-control" id="entry_2002669445" dir="auto" aria-label="record  " placeholder="What records did you request?"></textarea><br/>

    <input type="text" name="entry.441692025" value="" class="form-control" id="entry_441692025" dir="auto" aria-label="requestdate  " placeholder="When did you request them? Enter as mm/dd/yyyy" title=""><br/>
    
    <input type="text" name="entry.555092091" value="" class="form-control" id="entry_555092091" dir="auto" aria-label="returndate  " placeholder="When were they returned? Enter as mm/dd/yyyy" title=""><br/>

    <input type="text" name="entry.643362610" value="" class="form-control" id="entry_643362610" dir="auto" aria-label="contact  " placeholder="To whom did you send this request?" title=""><br/>

    <input type="text" name="entry.503172213" value="" class="form-control" placeholder="Phone: Enter as 555-555-5555" id="entry_503172213" dir="auto" aria-label="phone  " title=""><br/>

    <input type="text" name="entry.1262310475" value="" class="form-control" id="entry_1262310475" dir="auto" aria-label="email  " title="" placeholder="Email: enter as person@org.gov"><br/>

    <select name="entry.71447735" class="form-control" id="entry_71447735" aria-label="status  ">
    <option value="">-- Status --</option>
    <option value="approved">Approved</option>
    <option value="denied">Denied</option>
    <option value="unresponsive">No responsive records</option>
    <option value="pending">Pending</option>
    </select>

</div>
      <div class="modal-footer">
         
         <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
         
         <button type="submit" name="submit" value="Submit" id="ss-submit" class="btn btn-primary">Submit</button>
</form>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- FOIA Modal -->
<div class="modal fade" id="foia" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
<div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">FOIA template</h4>
      </div>     

     <div class="modal-body" id="foiatext">
   
<p>March 3, 2013</p>

<p>
FOIA Officer Everett Honeycomb<br/>
U.S. Department of the Interior<br/>
123 Street Ave.<br/>
Washington, D.C. 12345<br/>
</p>

<p>FOIA Request (Fee waiver requested)</p>

<p>Dear Mr. Honeycomb:</p>

<p>Pursuant to the federal Freedom of Information Act, 5 U.S.C. &sect; 552, I request a current copy of DOI's database of beekeepers in Nebraska.</p>

<p>I request that these records be provided in an electronic format that can be imported into standard database software. Examples include an Excel .xls or .xlsx file, an Access .mdb or .accdb file, a text-based delimited file (.csv, .txt., .tsv., etc.), a .dbf file or an SQL dump readable by standard open-source database software. (This would not include PDFs, which are not readable by database software.)</p>

<p>This information is being sought on behalf of the Omaha World-Herald for dissemination to the general public; therefore, I ask that you waive any applicable fees. If my request is denied in whole or part, I ask that you justify all deletions by reference to specific exemptions of the act. I will also expect you to release all segregable portions of otherwise exempt material. I reserve the right to appeal your decision to withhold any information or to deny a waiver of fees.</p>

<p>As I am making this request as a journalist and this information is of timely value, I would appreciate your communicating with me by e-mail or telephone rather than by mail if you have questions regarding this request.</p>

Sincerely,<br/>                
Cody Winchester<br/>
Omaha World-Herald<br/>                                
      </div>
      <div class="modal-footer">
	  <span class="hint"></span>
        <button type="button" class="btn btn-primary" onclick="selectText('foiatext');">Select text</button>
         <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- Neb Modal -->
<div class="modal fade" id="neb" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
     <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Nebraska records request template</h4>
      </div>
    
      <div class="modal-body" id="nebtext">
        
<p>May 1, 2013</p>

<p>
Deputy County Attorney Mike Smith<br/>
Sarpy County<br/>
1234 Golden Gate Dr.<br/>
Papillion, NE 68046<br/>
</p>

<p>Records Request (Fee waiver requested)</p>

<p>Dear Mr. Smith:</p>
                
<p>Pursuant to Neb. Rev. Stat. Secs. 84-712 to 84-712.09, I request copies of the complaint forms submitted to Sarpy County 911 from Jan. 1, 2011, to present.</p>

<p>In the event you are not the custodian of the records being requested, please redirect this to the appropriate person&rsquo;s attention and apprise me of the change. </p>

<p>If you expect the cost of this request to exceed $50, please contact me beforehand. If you deny this request, please provide a written explanation, including a reference to the specific statutory exemption(s) on which you rely. Note that state law requires you to provide all redacted portions of otherwise exempt material.</p>

<p>Please don't hesitate to contact me if you have any questions about fulfilling this request. As I am making this request as a journalist and this information is of timely value, I would appreciate your communicating with me by e-mail or telephone rather than by mail if you have questions regarding this request.</p>
                
Sincerely,<br/>                
Cody Winchester<br/>
Omaha World-Herald                        
      </div>
      <div class="modal-footer">
	  <span class="hint"></span>
        <button type="button" class="btn btn-primary" onclick="selectText('nebtext');">Select text</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- Old Modal -->
<div class="modal fade" id="oldmodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
     <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Requests older than 30 days</h4>
      </div>
      <div class="modal-body" id="oldtext"></div>
      <div class="modal-footer">
       <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<script type="text/javascript" src="http://dataomaha.com/media/scripts/tablesorter/jquery.tablesorter.min.js"></script>
        <script>

        var icon, diff;
        var oldrequests = [];
        
        function displayContent(json) {
            var table_content='';
            var len = json.feed.entry.length;
     for (var i=0; i<len; i++) {        
            var agency = json.feed.entry[i].gsx$agency.$t;
            var record = json.feed.entry[i].gsx$record.$t;
            var reqdate = json.feed.entry[i].gsx$requestdate.$t.replace("'","");
            var returndate = json.feed.entry[i].gsx$returndate.$t.replace("'","");
            var phone = json.feed.entry[i].gsx$phone.$t;
			var contact = ''
			if (json.feed.entry[i].gsx$email.$t)
				{contact = '<a href="mailto:' + json.feed.entry[i].gsx$email.$t + '">' + json.feed.entry[i].gsx$contact.$t + '</a>'}
			else
				{contact = json.feed.entry[i].gsx$contact.$t };			
            var status = json.feed.entry[i].gsx$status.$t;
            var now = new Date();
                        
            var day = 86400000;
            var reqin = new Date(json.feed.entry[i].gsx$requestdate.$t);
            var retin = new Date(json.feed.entry[i].gsx$returndate.$t);
                                    
            if (returndate == '' || returndate == null) 
                    { diff = Math.abs((now.getTime() - reqin.getTime())/(day)).toFixed(0) }
            else
                    { diff = Math.abs((retin.getTime() - reqin.getTime())/(day)).toFixed(0) }
            
            if (diff > 30 && status == "pending") {
                var old = '<li class="list-group-item"><strong>' + agency + '</strong>: ' + record + ' <span style="background:yellow; font-weight:bold;">' + diff + ' days out</span></li>'
                oldrequests.push(old)
                }
            
            if (status == "approved") 
                    { icon = '<span style="display:none;">approved</span><span class="sourcenote" data-toggle="tooltip" alt="Approved" title="Approved"><i class="fa fa-smile-o"></i></span>' } 
            else if (status == "denied") 
                    { icon = '<span style="display:none;">denied</span><span class="sourcenote" data-toggle="tooltip" alt="Denied" title="Denied"><i class="fa fa-frown-o"></i></span>' }
            else if (status == "unresponsive")
                    { icon = '<span style="display:none;">unresponsive no responsive records</span><span class="sourcenote" data-toggle="tooltip" alt="No responsive records" title="No responsive records"><i class="fa fa-meh-o"></i></span>' }
            else if (status == "pending")
                    { icon = '<span style="display:none;">pending</span><span class="sourcenote" data-toggle="tooltip" alt="Pending" title="Pending"><i class="fa fa-clock-o"></i></span>' }
                    
table_content += [
'<tr><td>' + agency + '</td><td>' + record + '</td><td class="c">' + reqdate + '</td><td class="c">' + returndate + '</td><td class="c">' + diff + '</td><td class="c">' + contact + '</td><td class="c">' + phone + '</td><td class="c">' + icon + '</td></tr>'
].join('');
                        
document.getElementById('records').innerHTML = "<table id='reqqqs' class='table table-striped table-condensed'><thead><tr><th>Agency</th><th>Record</th><th class='c'>Requested</th><th class='c'>Returned</th><th class='c'>Days passed</th><th class='c'>Contact</th><th class='c'>Phone</th><th class='c'>Status</th></thead><tbody>" + table_content + '</tbody></table>'

document.getElementById('oldtext').innerHTML = "<ul class='list-group' id='oldlist'>" + oldrequests + "</ul>"

    } }

function selectText(element) {
    var doc = document;
    var text = doc.getElementById(element);    
    if (doc.body.createTextRange) { 
        var range = doc.body.createTextRange();
        range.moveToElementText(text);
        range.select();
    } else if (window.getSelection) {
        var selection = window.getSelection();            
        var range = doc.createRange();
        range.selectNodeContents(text);
        selection.removeAllRanges();
        selection.addRange(range);
    }
	
	$('.hint').html('Press Ctrl + C to copy');
    $('.hint').fadeIn('slow');

}

$(document).ready(function() {
$('.sourcenote').tooltip({
'placement' : 'auto' });
if ($('#oldlist li').length != 0)
    {
$('#oldmodal').modal('show');
    }
});

$('#newentry').click(function() {
setTimeout(function() {$('#entry_596595219').focus()}, 500);
});

function KeyPress(e) {
    var evtobj = window.event? event : e
    if (evtobj.keyCode == 67 && evtobj.ctrlKey) 
    {$('.hint').html('Copied!').fadeOut('slow')};
}

document.onkeydown = KeyPress;


</script>
<!--
<script src="http://spreadsheets.google.com/feeds/list/0Ag4MM37uq7FmdFFuMW15Rk1seGVFd3cyaUFtcjN0THc/od6/public/values?alt=json-in-script&amp;callback=displayContent" type="text/javascript"></script>
-->
<script>
$('#reqqqs').tablesorter({sortList: [[2,0]]});
$("table").addTableFilter();
</script>

</body>

</html>
