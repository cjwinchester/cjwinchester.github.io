<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DSM to decimal converter</title>

    <!-- Bootstrap -->
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

    
    
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

<div class="container">

<div class="row">

<div class="col-md-6">

  <h1 style="font-weight:bold">DSM in</h1>  
  <textarea class="form-control" rows="8" id="in"></textarea>
  <br/>
  <button type="button" class="btn btn-success" onclick="DoItUp();">Beer me</button>
  
  </div>
  
  <div class="col-md-6">
    <h1 style="font-weight:bold">Decimals out</h1>
  <textarea class="form-control" rows="8" id="out"></textarea>
  
  <br/>
  <button type="button" class="btn btn-primary" onclick="Select();">Select text</button>
 <button type="button" class="btn btn-danger" onclick="Clear()">Clear</button>

</div>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

<script>

var coords = ""

function DoItUp() {
  
    var input = $("#in").val().replace(/\xb0/g,'').replace(/"/g,'').replace(/'/g,'').replace(/N/gi,"").replace(/S/gi,"").replace(/E/gi,"").replace(/W/gi,""); 
    
    if (input.indexOf("\n") !== -1 && input.indexOf(",") !== -1 && input.indexOf(" ") !== -1) {
    
    var lines = input.split('\n');

    for(var i = 0; i < lines.length; i++){
        var sep = lines[i].split(",");
        var latlist = sep[0].split(" ");
        var dlat = latlist[0];
        var slat = latlist[1];
        var mlat = latlist[2];
        var lnglist = sep[1].split(" ");
        var dlng = lnglist[0];
        var slng = lnglist[1];
        var mlng = lnglist[2];
        var lat = dlat + "." + parseInt((parseFloat(slat)/60 + parseFloat(mlat)/3600) * 100000000).toString()
        var lng = dlng + "." + parseInt((parseFloat(slng)/60 + parseFloat(mlng)/3600) * 100000000).toString()
    
        coords += lat + "," + lng + "\n";
    }
    
        $('#out').val(coords)
       
    }    
            else {console.log("dude what are you doing even")}
   
};


function Select() {
    $("#out").select()
}

function Clear() {
$('textarea').val('');
};

</script>


  </body>
</html>