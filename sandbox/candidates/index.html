
<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
    <title>Candidate tracker</title>

    <!-- Bootstrap base layer -->
    <link href="http://dataomaha.com/media/scripts/bootstrap/3.0.3/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->

	 <style>
    img.logo { width: 75px; padding: 15px 0; }
    .green { background: #2ca25f; color: #fff; }
    .navbar-inverse .navbar-brand { color: #ccc; }
	div.jumbotron {margin-top: 2.3em;}
	div.jumbotron p.lead { color: #ccc;}
	h1 { font-weight: bold; letter-spacing: -1px; }
	.blocky { height: 12px; width: 12px; margin-right: 6px; float: left; margin-top:4px; border-radius:2px; -moz-border-radius:2px; -webkit-border-radius:2px;}
	th { cursor:pointer; cursor:hand; }
	th:hover { background: #e5f5e0 }
	#countdown, #last_updated, .glyphicon-time { color:#fff; font-size:60%; }
    

    </style>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
	
	
	</head>

  <body data-spy="scroll" data-target=".navbar-scroller">
 
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#" id="adder" data-toggle="modal" data-target="#cand">Add candidate</a>
		   
        </div>
        <div class="collapse navbar-collapse">

		<ul class="nav navbar-nav navbar-scroller">
            <li><a href="https://docs.google.com/spreadsheet/ccc?key=0Ag4MM37uq7FmdGVhY2JZeHlLbE9kVlotXzVqVUQzQUE&usp=drive_web#gid=0" target="_blank">Edit spreadsheet</a></li>
          </ul>
		  
		<a class="navbar-right" href="http://omaha.com" target="_blank"><img class="logo" src="http://omaha.com/assets/images/OW5235817.PNG"></a>
        </div><!--/.nav-collapse -->
      </div>
    </div>

	<!-- header image -->
	
	<div class="jumbotron green">
    <div class="container">
			<h1>Candidate tracker 2014</h1>
			<p class="lead">Your one-stop shop for Douglas and Sarpy filings<br/><span id="last_updated"></span> <span class="glyphicon glyphicon-time"></span> <span id="countdown"></span></p>
			
	</div>
	</div>
	
	<div class="container" style="margin-bottom: 50px;">

    <div class="row">
    
<div class="col-md-2">
<div class="checkbox">
<label>
  <input type="checkbox" class="demcheck" checked><div class="blocky" style="background: #3182bd;"></div> Democrats
</label>
</div>
<div class="checkbox">
<label>
  <input type="checkbox" class="repcheck" checked><div class="blocky" style="background: #de2d26;"></div> Republicans
</label>
</div>

<div class="checkbox">
<label>
  <input type="checkbox" class="othercheck" checked><div class="blocky" style="background: #fe9929;"></div> Other
</label>
</div>
</div>

<div class="col-md-2">
<div class="checkbox">
<label>
  <input type="checkbox" class="sarpycheck" checked> Sarpy
</label>
</div>

<div class="checkbox">
<label>
  <input type="checkbox" class="dougcheck" checked> Douglas
</label>
</div>

<div class="checkbox">
<label>
  <input type="checkbox" class="statecheck" checked> Statewide
</label>
</div>

</div>

<div class="col-md-2">
<div class="checkbox">
<label>
  <input type="checkbox" class="fedcheck" checked> Federal
</label>
</div>

<div class="checkbox">
<label>
  <input type="checkbox" class="inccheck" checked> Incumbents
</label>
</div>

<div class="checkbox">
<label>
  <input type="checkbox" class="chalcheck" checked> Challengers
</label>
</div>
</div>

</div><!-- end row -->
	
		<div id="candidates"></div>

		
<!-- Form modal -->
<div class="modal fade" id="cand" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
    
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Add new candidate</h4>
      </div>
      <div class="modal-body" id="formentry">
   
<script type="text/javascript">var submitted=false;</script>

    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;" onload="if(submitted) {location.reload()}"></iframe>    

<form action="https://docs.google.com/forms/d/1mUxawh42VVFau-vrngi4Pj3xoEMtqUaHVRfjILEk6sY/formResponse" method="POST" id="thinger" target="hidden_iframe" role="form" onsubmit="Javascript: $('#cand').modal('hide'); setTimeout(function() {$('#thinger').find('input:text, input:password, input:file, select, textarea').val(''); $('#thinger').find('input:radio, input:checkbox').removeAttr('checked').removeAttr('selected');}, 1000); setTimeout(function() {location.reload(true);}, 3500)">
	
<input type="text" name="entry.1252196491" value="" class="form-control" id="entry_1252196491" dir="auto" aria-label="last name  " title="" placeholder="Last name"><br/>

<input type="text" name="entry.253667406" value=""class="form-control" id="entry_253667406" dir="auto" aria-label="first name  " title="" placeholder="First name"><br/>

<select name="entry.849273225" id="entry_849273225" aria-label="County" class="form-control">
<option value="">-- County --</option>
<option value="Sarpy">Sarpy</option>
<option value="Douglas">Douglas</option>
<option value="Statewide">Statewide</option>
<option value="Federal">Federal</option>
</select>
<br/>

<input type="text" name="entry.1602335383" value="" class="form-control" id="entry_1602335383" dir="auto" aria-label="race" title="" placeholder="Race"><br/>

<input type="text" name="entry.872767722" value="" id="entry_872767722" dir="auto" aria-label="district  " title="" class="form-control" placeholder="District"><br/>

<input type="text" name="entry.1615347966" value="" class="form-control" id="entry_1615347966" dir="auto" aria-label="link  " title="" placeholder="Candidate URL"><br/>

<input type="text" name="entry.644586483" value="" class="form-control" id="entry_644586483" dir="auto" aria-label="filing date  " title="" placeholder="Filing date in mm/dd/yyyy form"><br/>

<input type="text" name="entry.942788453" value="" class="form-control" id="entry_942788453" dir="auto" aria-label="mug url  " title="" placeholder="Mug URL"><br/>

<textarea name="entry.364167617" rows="5" class="form-control" id="entry_364167617" dir="auto" aria-label="bio" placeholder="A few grafs of bio, if you want."></textarea><br/>

<b>Incumbent?</b>
<div class="radio">
  <label>
    <input type="radio" name="entry.2110092987" id="group_2110092987_1" value="true" checked>
    Yes
  </label>
</div>
<div class="radio">
  <label>
    <input type="radio" name="entry.2110092987" id="group_2110092987_2" value="false">
    No
  </label>
</div><br/>

<b>Party</b>
<div class="radio">
  <label>
    <input type="radio" name="entry.1222733627" id="group_2110092987_1" value="democrat" id="group_1222733627_1" checked>
    Democrat
  </label>
</div>
<div class="radio">
  <label>
    <input type="radio" name="entry.1222733627" value="republican" id="group_1222733627_2">
    Republican
  </label>
</div>
<div class="radio">
  <label>
<input type="radio" name="entry.1222733627" value="other" id="group_1222733627_3">
	Other
  </label>
</div>

</div>
      <div class="modal-footer">
         
         <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
         
         <button type="submit" name="submit" value="Submit" id="ss-submit" class="btn btn-primary">Submit</button>
</form>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
	
    </div><!-- /.container -->

	</body>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="http://dataomaha.com/media/scripts/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    
	    <script>
    /*
 jQuery Plugin: Table Filter - version 0.2.1

 LICENSE: http://hail2u.mit-license.org/2009
*/
(function(a){a.fn.addTableFilter=function(d){var b=a.extend({},a.fn.addTableFilter.defaults,d),c,e;this.is("table")&&(this.attr("id")||this.attr({id:"t-"+Math.floor(99999999*Math.random())}),c=this.attr("id"),d=c+"-filtering",e=a("<label/>").attr({"for":d}).append(b.labelText),b=a('<input type="text" class="form-control" id="search" placeholder="Filter ...">').attr({id:d,size:b.size}),a("<p/>").addClass("formTableFilter").append(e).append(b).insertBefore(this),a("#"+d).delayBind("keyup",function(){var b=a(this).val().toLowerCase().split(" ");a("#"+c+
" tbody tr").each(function(){var d=a(this).html().toLowerCase().replace(/<.+?>/g,"").replace(/\s+/g," "),c=0;a.each(b,function(){if(0>d.indexOf(this))return c=1,!1});c?a(this).hide():a(this).show()})},300));return this};a.fn.addTableFilter.defaults=a.fn.delayBind=function(d,b,c,e){a.isFunction(b)&&(e=c,c=b,b=void 0);var g=this,f=null;return this.bind(d,b,function(b){clearTimeout(f);f=setTimeout(function(){c.apply(g,[a.extend({},b)])},e)})}})(jQuery);

</script>

<script type="text/javascript" src="http://dataomaha.com/media/scripts/tablesorter/jquery.tablesorter.min.js"></script>

        <script>
var colblock = '';
var dates = [];

        function displayContent(json) {
            var table_content='';
            var len = json.feed.entry.length;
     for (var i=0; i<len; i++) {        
            var last = json.feed.entry[i].gsx$last.$t;
            var first = json.feed.entry[i].gsx$first.$t;
			var county = json.feed.entry[i].gsx$county.$t;
            var mugurl = json.feed.entry[i].gsx$mugurl.$t;
            var bio = json.feed.entry[i].gsx$bio.$t;
            var district = json.feed.entry[i].gsx$district.$t;
            var race = json.feed.entry[i].gsx$race.$t
			if (json.feed.entry[i].gsx$link.$t)
				{ name = '<a href="' + json.feed.entry[i].gsx$link.$t + '" target="_blank">' + json.feed.entry[i].gsx$first.$t + ' ' + json.feed.entry[i].gsx$last.$t + '</a>' }
			else
				{ name = json.feed.entry[i].gsx$first.$t + ' ' + json.feed.entry[i].gsx$last.$t };
            var incumbent = json.feed.entry[i].gsx$incumbent.$t.toLowerCase();
			var party = json.feed.entry[i].gsx$party.$t;
			var filed = json.feed.entry[i].gsx$filed.$t.replace("'","");
			var timestamp = new Date(json.feed.entry[i].gsx$timestamp.$t);
            dates.push(timestamp);

            if (party == "democrat") 
                    { colblock = '#3182bd' }
            else if (party == "republican") 
                    { colblock = '#de2d26' }
            else if (party == "other")
                    { colblock = '#fe9929' }
                    
table_content += [
'<tr class="' + party + ' ' + incumbent + ' ' + county + '"><td><span style="display:none;">' + last + '</span><div class="blocky" style="background:' + colblock + '"></div>' + name + '</td><td>' + race + '</td><td>' + district + '</td><td>' + county + '</td><td>' + filed + '</td></tr>'
].join('');
                        
document.getElementById('candidates').innerHTML = "<table id='reqqqs' class='table table-responsive table-striped'><thead><tr><th>Name</th><th>Race</th><th>District</th><th>Where</th><th>Filed</th></thead><tbody>" + table_content + '</tbody></table>'

var maxDate = new Date(Math.max.apply(null,dates));

var apmonths = ["Jan.", "Feb.", "March", "April", "May", "June", "July", "Aug.", "Sept.", "Aug.", "Sept.", "Oct.", "Nov.", "Dec."]

var day = maxDate.getDate(); 

document.getElementById('last_updated').innerHTML = "Last updated " + apmonths[maxDate.getMonth()] + " " + day

    } }

$('#adder').click(function() {
setTimeout(function() {$('#entry_1252196491').focus()}, 500);
});

var target_date = new Date("Tue May 13 2014 08:00:00 GMT-0600").getTime();
var days, hours, minutes, seconds; 
var countdown = document.getElementById("countdown");
 
setInterval(function () {
    var current_date = new Date().getTime();
    var seconds_left = (target_date - current_date) / 1000;
    days = parseInt(seconds_left / 86400);
    seconds_left = seconds_left % 86400;
    hours = parseInt(seconds_left / 3600);
    seconds_left = seconds_left % 3600;
    minutes = parseInt(seconds_left / 60);
    seconds = parseInt(seconds_left % 60);
    countdown.innerHTML = days + " days, " + hours + " hours, "
    + minutes + " minutes, " + seconds + " seconds until polls open for the 2014 primary";  
}, 1000);

$('.demcheck').click(function() {
    if( $('.demcheck:checked').length > 0 ) {
        $(".democrat").fadeIn('slow');
    } else {
        $(".democrat").fadeOut('slow');
    }
});

$('.repcheck').click(function() {
    if( $('.repcheck:checked').length > 0 ) {
        $(".republican").fadeIn('slow');
    } else {
        $(".republican").fadeOut('slow');
    }
});

$('.othercheck').click(function() {
    if( $('.othercheck:checked').length > 0 ) {
        $(".other").fadeIn('slow');
    } else {
        $(".other").fadeOut('slow');
    }
});

$('.fedcheck').click(function() {
    if( $('.fedcheck:checked').length > 0 ) {
        $(".Federal").fadeIn('slow');
    } else {
        $(".Federal").fadeOut('slow');
    }
});

$('.statecheck').click(function() {
    if( $('.statecheck:checked').length > 0 ) {
        $(".Statewide").fadeIn('slow');
    } else {
        $(".Statewide").fadeOut('slow');
    }
});

$('.sarpcheck').click(function() {
    if( $('.sarpcheck:checked').length > 0 ) {
        $(".Sarpy").fadeIn('slow');
    } else {
        $(".Sarpy").fadeOut('slow');
    }
});

$('.dougcheck').click(function() {
    if( $('.dougcheck:checked').length > 0 ) {
        $(".Douglas").fadeIn('slow');
    } else {
        $(".Douglas").fadeOut('slow');
    }
});

$('.inccheck').click(function() {
    if( $('.inccheck:checked').length > 0 ) {
        $(".true").fadeIn('slow');
    } else {
        $(".true").fadeOut('slow');
    }
});

$('.chalcheck').click(function() {
    if( $('.chalcheck:checked').length > 0 ) {
        $(".false").fadeIn('slow');
    } else {
        $(".false").fadeOut('slow');
    }
});

</script>

<script src="http://spreadsheets.google.com/feeds/list/0Ag4MM37uq7FmdGVhY2JZeHlLbE9kVlotXzVqVUQzQUE/od6/public/values?alt=json-in-script&amp;callback=displayContent" type="text/javascript"></script>

<script type="text/javascript">
$("table").addTableFilter();
$('#reqqqs').tablesorter({sortList: [[0,0]]});
</script>

  
  </html>
